# Настройка DNS записей для profitech.store

## Проблема

В панели управления DNS (HOSTKEY) есть только SOA и NS записи, но **нет A-записей**, которые указывают на IP-адрес вашего сервера. Без A-записей домен не будет работать!

## Что нужно добавить

В панели управления DNS (HOSTKEY) нужно добавить следующие записи:

### 1. A-запись для корневого домена (@)

```
Название: @
Тип: A
Данные: 82.26.91.241
TTL: 3600 (или по умолчанию)
```

**Важно:** Замените `82.26.91.241` на IP-адрес вашего VPS сервера!

### 2. A-запись для www поддомена

```
Название: www
Тип: A
Данные: 82.26.91.241
TTL: 3600 (или по умолчанию)
```

### 3. (Опционально) AAAA-запись для IPv6

Если у вашего сервера есть IPv6 адрес (например, `2a00:f940:2:2:1:1:0:12`):

```
Название: @
Тип: AAAA
Данные: 2a00:f940:2:2:1:1:0:12
TTL: 3600
```

И для www:

```
Название: www
Тип: AAAA
Данные: 2a00:f940:2:2:1:1:0:12
TTL: 3600
```

## Как узнать IP вашего сервера

На сервере выполните:

```bash
# IPv4 адрес
curl -4 ifconfig.me
# или
curl -4 ipinfo.io/ip

# IPv6 адрес (если есть)
curl -6 ifconfig.co
```

## Пошаговая инструкция для HOSTKEY

1. **Откройте панель управления DNS** (как на скриншоте)

2. **Нажмите кнопку "Добавить DNS запись"** (внизу слева)

3. **Добавьте первую A-запись:**
   - **Название:** `@` (или оставьте пустым, если система сама подставит)
   - **Тип:** `A`
   - **Данные:** `82.26.91.241` (замените на ваш IP)
   - **TTL:** `3600` (или оставьте по умолчанию)
   - Нажмите "Сохранить" или "Добавить"

4. **Добавьте вторую A-запись для www:**
   - **Название:** `www`
   - **Тип:** `A`
   - **Данные:** `82.26.91.241` (тот же IP)
   - **TTL:** `3600`
   - Нажмите "Сохранить"

5. **Проверьте результат:**
   После добавления записей таблица должна выглядеть примерно так:

   ```
   @    SOA    ns1.hostkey.ru. ns2.hostkey.ru. ...
   @    NS     ns1.hostkey.ru ns2.hostkey.ru
   @    A      82.26.91.241          ← НОВАЯ ЗАПИСЬ
   www  A      82.26.91.241          ← НОВАЯ ЗАПИСЬ
   ```

## Проверка DNS записей

После добавления записей подождите 5-15 минут (распространение DNS) и проверьте:

```bash
# Проверка A-записи для корневого домена
nslookup profitech.store

# Проверка A-записи для www
nslookup www.profitech.store

# Или через dig (более подробно)
dig profitech.store A
dig www.profitech.store A
```

Ожидаемый результат:
```
Name: profitech.store
Address: 82.26.91.241
```

## Важно!

1. **Убедитесь, что у регистратора домена указаны правильные nameservers:**
   - `ns1.hostkey.ru`
   - `ns2.hostkey.ru`

2. **IP-адрес должен быть правильным** - это IP вашего VPS сервера, где работает Nginx

3. **После добавления записей подождите** 5-15 минут для распространения DNS

4. **Проверьте доступность** через `curl http://profitech.store`

## После настройки DNS

Когда DNS записи настроены и работают:

1. **Проверьте домен:**
   ```bash
   npm run domain:check
   ```

2. **Получите SSL сертификат:**
   ```bash
   npm run ssl:get-webroot
   ```

## Частые проблемы

### DNS не обновляется

- Подождите до 24 часов (обычно 5-15 минут)
- Очистите DNS кэш: `sudo systemd-resolve --flush-caches` (Linux) или `ipconfig /flushdns` (Windows)
- Проверьте через разные DNS серверы: `dig @8.8.8.8 profitech.store`

### Домен не открывается

- Проверьте, что A-запись указывает на правильный IP
- Убедитесь, что Nginx запущен: `sudo systemctl status nginx`
- Проверьте, что приложение работает: `pm2 list`

### Let's Encrypt все еще выдает 404

- Убедитесь, что DNS записи настроены и работают
- Проверьте доступность домена из интернета: `curl http://profitech.store`
- Используйте метод webroot: `npm run ssl:get-webroot`

