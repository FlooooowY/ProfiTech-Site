# Настройка AI Ассистента

## Текущее состояние

AI ассистент интегрирован с OpenRouter API и использует модель **Xiaomi MiMo-V2-Flash** (бесплатная).

### Что уже работает:
- ✅ UI компонент чата (плавающая кнопка в правом нижнем углу)
- ✅ Отправка сообщений и получение ответов
- ✅ Сохранение истории сообщений
- ✅ Быстрые вопросы для начала диалога
- ✅ Адаптивный дизайн для мобильных устройств
- ✅ Интеграция с переводом (готово к использованию)

### Текущая логика:
Ассистент отвечает на основе ключевых слов:
- Кофе / кофемашины
- Холодильное оборудование
- Бар
- Цены / стоимость
- Доставка
- Гарантия

## Варианты улучшения

### ✅ Интеграция с OpenRouter (уже реализовано)

**Используемая модель:** Xiaomi MiMo-V2-Flash (бесплатная)

**Преимущества:**
- ✅ Умные ответы на любые вопросы
- ✅ Понимание контекста разговора
- ✅ Рекомендации товаров на основе запросов
- ✅ Поддержка многоязычности
- ✅ Бесплатная модель
- ✅ Высокая скорость ответов (150 токенов/сек)

**Требования:**
- API ключ OpenRouter (бесплатный)

**Шаги для настройки:**

1. Зарегистрируйтесь на https://openrouter.ai/
2. Получите API ключ (бесплатно)
3. Добавьте API ключ в `.env.local`:
```env
OPENROUTER_API_KEY=sk-or-v1-...
```

4. Перезапустите сервер:
```bash
npm run dev
```

**Готово!** Ассистент будет использовать модель MiMo-V2-Flash для ответов.

**Примечание:** Если API ключ не установлен, используется fallback логика на основе ключевых слов.

### Вариант 2: Улучшение текущей логики

Расширить базу знаний и добавить больше ключевых слов и ответов.

**Преимущества:**
- Бесплатно
- Полный контроль над ответами
- Не зависит от внешних сервисов

**Недостатки:**
- Ограниченные возможности
- Нужно вручную добавлять все варианты вопросов

### Вариант 3: Гибридный подход

Использовать простую логику для частых вопросов, OpenAI для сложных.

## Рекомендации

Для профессионального сайта рекомендуется **Вариант 1 (OpenAI)** с использованием модели `gpt-3.5-turbo` (дешевле) или `gpt-4` (умнее, но дороже).

### Настройка OpenAI

1. Создайте аккаунт на https://platform.openai.com
2. Получите API ключ
3. Добавьте в `.env.local`:
```env
OPENAI_API_KEY=sk-ваш-ключ
```

4. Установите пакет:
```bash
npm install openai
```

5. Обновите `app/api/chat/route.ts` (код уже готов, нужно раскомментировать)

### Дополнительные улучшения

1. **Контекст товаров:** Передавать список товаров в промпт для более точных рекомендаций
2. **История разговора:** Сохранять контекст предыдущих сообщений
3. **Интеграция с каталогом:** Позволять ассистенту искать товары в реальном времени
4. **Многоязычность:** Поддержка английского языка в чате

## Текущие файлы

- `components/AIAssistant.tsx` - UI компонент чата
- `app/api/chat/route.ts` - API endpoint для обработки сообщений
- `store/chatStore.ts` - Zustand store для управления состоянием чата

## Быстрый старт с OpenAI

1. Установите пакет:
```bash
npm install openai
```

2. Добавьте в `.env.local`:
```env
OPENAI_API_KEY=sk-ваш-ключ
```

3. Откройте `app/api/chat/route.ts` и раскомментируйте код с OpenAI (строки 48-104)

4. Закомментируйте текущую простую логику (строки 7-46)

5. Перезапустите сервер:
```bash
npm run dev
```

Готово! Ассистент будет использовать OpenAI для ответов.

